// ============================================
// ðŸ”‘ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Supabase
// ============================================

const SUPABASE_URL = 'https://chmistqmcmmmjqeanudu.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNobWlzdHFtY21tbWpxZWFudWR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2NDg1MTEsImV4cCI6MjA3NjIyNDUxMX0.Ho-3nEs3_w5Xmna2z0HQF6dDjh8MkiBzD10N_6vuEKs';

// ØªÙ‡ÙŠØ¦Ø© Supabase Client
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);


-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email TEXT,
    name TEXT,
    phone TEXT,
    user_type TEXT,
    carrier_type TEXT,
    shipper_type TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø±Ø­Ù„Ø§Øª
CREATE TABLE trips (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    from_city TEXT NOT NULL,
    to_city TEXT NOT NULL,
    trip_date DATE NOT NULL,
    available_weight INT NOT NULL,
    carrier_type TEXT,
    status TEXT DEFAULT 'available',
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø´Ø­Ù†Ø§Øª
CREATE TABLE shipments (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    from_city TEXT NOT NULL,
    to_city TEXT NOT NULL,
    needed_date DATE NOT NULL,
    weight INT NOT NULL,
    shipper_type TEXT,
    status TEXT DEFAULT 'pending',
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø§Øª
CREATE TABLE matches (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    trip_id UUID REFERENCES trips(id),
    shipment_id UUID REFERENCES shipments(id),
    match_score INT,
    status TEXT DEFAULT 'suggested',
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(trip_id, shipment_id)
);

-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
CREATE TABLE messages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    sender_id UUID REFERENCES users(id),
    receiver_id UUID REFERENCES users(id),
    match_id UUID REFERENCES matches(id),
    message TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW()
