<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار تحسينات الوصول - Accessibility Test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            direction: rtl; 
        }
        .test-section { 
            margin: 20px 0; 
            padding: 20px; 
            border: 1px solid #ddd; 
            border-radius: 8px; 
        }
        .password-container {
            position: relative;
            display: inline-block;
        }
        .password-input {
            padding: 10px 40px 10px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 200px;
        }
        .toggle-password {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #666;
        }
        .mobile-menu-btn, .fab {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>اختبار تحسينات الوصول - Accessibility Test</h1>
    
    <div class="test-section">
        <h2>1. اختبار زر إظهار/إخفاء كلمة المرور</h2>
        <div class="password-container">
            <input type="password" id="testPassword" class="password-input" placeholder="اكتب كلمة المرور">
            <button type="button" class="toggle-password" id="testTogglePassword" 
                    title="إظهار/إخفاء كلمة المرور" 
                    aria-label="إظهار أو إخفاء كلمة المرور"
                    data-title-ar="إظهار/إخفاء كلمة المرور"
                    data-title-en="Show/Hide Password"
                    data-aria-ar="إظهار أو إخفاء كلمة المرور"
                    data-aria-en="Show or hide password">
                <i class="fas fa-eye"></i>
            </button>
        </div>
        <div class="result">
            <strong>النتيجة:</strong> <span id="passwordResult">في انتظار الاختبار...</span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>2. اختبار أزرار القائمة المحمولة</h2>
        <button class="mobile-menu-btn" 
                title="فتح القائمة" 
                aria-label="فتح القائمة"
                data-title-ar="فتح القائمة" 
                data-title-en="Open Menu"
                data-aria-ar="فتح القائمة" 
                data-aria-en="Open Menu">
            <i class="fas fa-bars"></i>
        </button>
        
        <button class="mobile-menu-btn" 
                title="إغلاق القائمة" 
                aria-label="إغلاق القائمة"
                data-title-ar="إغلاق القائمة" 
                data-title-en="Close Menu"
                data-aria-ar="إغلاق القائمة" 
                data-aria-en="Close Menu">
            <i class="fas fa-times"></i>
        </button>
        <div class="result">
            <strong>النتيجة:</strong> <span id="menuResult">في انتظار الاختبار...</span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>3. اختبار الأزرار العائمة</h2>
        <button class="fab"
                title="إضافة شحنة جديدة" 
                aria-label="إضافة شحنة جديدة"
                data-title-ar="إضافة شحنة جديدة" 
                data-title-en="Add New Shipment"
                data-aria-ar="إضافة شحنة جديدة" 
                data-aria-en="Add New Shipment">
            <i class="fas fa-plus"></i>
        </button>
        <div class="result">
            <strong>النتيجة:</strong> <span id="fabResult">في انتظار الاختبار...</span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>4. اختبار تغيير اللغة</h2>
        <button onclick="toggleLanguage()">تغيير اللغة / Change Language</button>
        <div class="result">
            <strong>اللغة الحالية:</strong> <span id="currentLang">ar</span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>5. نتائج فحص الوصول</h2>
        <button onclick="runAccessibilityCheck()">فحص الوصول</button>
        <div class="result" id="accessibilityResults">
            <p>اضغط على زر "فحص الوصول" لبدء الاختبار</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/accessibility.js"></script>
    
    <script>
        // Test password toggle functionality
        document.getElementById('testTogglePassword').addEventListener('click', function() {
            const passwordInput = document.getElementById('testPassword');
            const icon = this.querySelector('i');
            const result = document.getElementById('passwordResult');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
                result.innerHTML = '✅ تم تغيير النوع إلى text وتحديث الأيقونة';
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
                result.innerHTML = '✅ تم تغيير النوع إلى password وتحديث الأيقونة';
            }
        });
        
        // Test menu buttons
        document.querySelectorAll('.mobile-menu-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const result = document.getElementById('menuResult');
                const title = this.getAttribute('title');
                const ariaLabel = this.getAttribute('aria-label');
                result.innerHTML = `✅ تم النقر: العنوان="${title}", ARIA="${ariaLabel}"`;
            });
        });
        
        // Test FAB button
        document.querySelector('.fab').addEventListener('click', function() {
            const result = document.getElementById('fabResult');
            const title = this.getAttribute('title');
            const ariaLabel = this.getAttribute('aria-label');
            result.innerHTML = `✅ تم النقر: العنوان="${title}", ARIA="${ariaLabel}"`;
        });
        
        // Language toggle test
        function toggleLanguage() {
            const currentLang = document.documentElement.lang;
            const newLang = currentLang === 'ar' ? 'en' : 'ar';
            
            document.documentElement.lang = newLang;
            document.getElementById('currentLang').textContent = newLang;
            
            // Update accessibility labels
            if (typeof window.AccessibilityUtils !== 'undefined') {
                window.AccessibilityUtils.updateLabels();
            }
        }
        
        // Accessibility check
        function runAccessibilityCheck() {
            const results = [];
            
            // Check buttons without text
            const buttonsWithoutText = document.querySelectorAll('button:not([aria-label]):not([title])');
            buttonsWithoutText.forEach(btn => {
                if (!btn.textContent.trim()) {
                    results.push(`❌ زر بدون نص وصفي: ${btn.outerHTML.substring(0, 50)}...`);
                }
            });
            
            // Check buttons with proper labels
            const buttonsWithLabels = document.querySelectorAll('button[aria-label], button[title]');
            results.push(`✅ عدد الأزرار مع تسميات وصفية: ${buttonsWithLabels.length}`);
            
            // Check keyboard navigation
            const focusableElements = document.querySelectorAll('button, input, a, [tabindex]');
            results.push(`✅ عدد العناصر القابلة للتركيز: ${focusableElements.length}`);
            
            // Check language support
            const elementsWithLangData = document.querySelectorAll('[data-title-ar], [data-aria-ar]');
            results.push(`✅ عدد العناصر مع دعم ثنائي اللغة: ${elementsWithLangData.length}`);
            
            // Display results
            document.getElementById('accessibilityResults').innerHTML = 
                '<h4>نتائج الفحص:</h4>' + 
                results.map(result => `<p>${result}</p>`).join('');
            
            // Run validation if available
            if (typeof window.AccessibilityUtils !== 'undefined') {
                console.log('تشغيل فحص الوصول المتقدم...');
                window.AccessibilityUtils.validate();
            }
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('تم تحميل صفحة الاختبار');
            
            // Run accessibility check automatically
            setTimeout(runAccessibilityCheck, 1000);
        });
    </script>
</body>
</html>