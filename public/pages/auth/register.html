<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang="ar">إنشاء حساب - الشحنة السريعة</title>
    <title data-lang="en" style="display: none;">Register - Fast Shipment</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/auth.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="auth-page">
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <a href="../../index.html" class="logo">
                    <i class="fas fa-shipping-fast"></i>
                    <span data-lang="ar">الشحنة السريعة</span>
                    <span data-lang="en" style="display: none;">Fast Shipment</span>
                </a>
                <h1 data-lang="ar">إنشاء حساب</h1>
                <h1 data-lang="en" style="display: none;">Create Account</h1>
                <p data-lang="ar">انضم إلى منصتنا وابدأ رحلتك في عالم الشحن</p>
                <p data-lang="en" style="display: none;">Join our platform and start your shipping journey</p>
            </div>

            <div class="user-type-selector">
                <h3 data-lang="ar">اختر نوع حسابك</h3>
                <h3 data-lang="en" style="display: none;">Choose Your Account Type</h3>
                <div class="type-options">
                    <div class="type-option active" data-type="carrier">
                        <i class="fas fa-truck"></i>
                        <span data-lang="ar">موصل شحنات</span>
                        <span data-lang="en" style="display: none;">Shipment Carrier</span>
                        <p data-lang="ar">لدي مساحة فارغة وأريد كسب المال</p>
                        <p data-lang="en" style="display: none;">I have empty space and want to earn money</p>
                    </div>
                    <div class="type-option" data-type="shipper">
                        <i class="fas fa-box"></i>
                        <span data-lang="ar">صاحب شحنة</span>
                        <span data-lang="en" style="display: none;">Shipper</span>
                        <p data-lang="ar">أريد إرسال شحنة وأبحث عن موصل</p>
                        <p data-lang="en" style="display: none;">I want to send a shipment and need a carrier</p>
                    </div>
                </div>
            </div>

            <form class="auth-form" id="registerForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="fullName" data-lang="ar">الاسم الكامل</label>
                        <label for="fullName" data-lang="en" style="display: none;">Full Name</label>
                        <input type="text" id="fullName" name="fullName" required>
                        <i class="fas fa-user input-icon"></i>
                    </div>
                </div>

                <div class="form-group">
                    <label for="email" data-lang="ar">البريد الإلكتروني</label>
                    <label for="email" data-lang="en" style="display: none;">Email Address</label>
                    <input type="email" id="email" name="email" required>
                    <i class="fas fa-envelope input-icon"></i>
                </div>

                <div class="form-group">
                    <label for="phone" data-lang="ar">رقم الهاتف</label>
                    <label for="phone" data-lang="en" style="display: none;">Phone Number</label>
                    <input type="tel" id="phone" name="phone" required>
                    <i class="fas fa-phone input-icon"></i>
                </div>

                <div class="form-group">
                    <label for="password" data-lang="ar">كلمة المرور</label>
                    <label for="password" data-lang="en" style="display: none;">Password</label>
                    <input type="password" id="password" name="password" required>
                    <i class="fas fa-lock input-icon"></i>
                    <button type="button" class="toggle-password" id="togglePassword">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>

                <div class="form-group">
                    <label for="confirmPassword" data-lang="ar">تأكيد كلمة المرور</label>
                    <label for="confirmPassword" data-lang="en" style="display: none;">Confirm Password</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required>
                    <i class="fas fa-lock input-icon"></i>
                </div>

                <div class="carrier-subtype" id="carrierSubtype" style="display: block;">
                    <div class="form-group">
                        <label for="carrierType" data-lang="ar">نوع الموصل</label>
                        <label for="carrierType" data-lang="en" style="display: none;">Carrier Type</label>
                        <select id="carrierType" name="carrierType">
                            <option value="" data-lang="ar">اختر نوع الموصل</option>
                            <option value="" data-lang="en" style="display: none;">Select Carrier Type</option>
                            <option value="individual" data-lang="ar">مسافر مستقل (تصل إلى 20 كجم)</option>
                            <option value="individual" data-lang="en" style="display: none;">Individual Traveler (up to 20kg)</option>
                            <option value="car_owner" data-lang="ar">صاحب سيارة (تصل إلى 1500 كجم)</option>
                            <option value="car_owner" data-lang="en" style="display: none;">Car Owner (up to 1500kg)</option>
                            <option value="truck_owner" data-lang="ar">صاحب شاحنة (تصل إلى 50 طن)</option>
                            <option value="truck_owner" data-lang="en" style="display: none;">Truck Owner (up to 50 tons)</option>
                            <option value="fleet_owner" data-lang="ar">صاحب أسطول (تصل إلى 1000 طن)</option>
                            <option value="fleet_owner" data-lang="en" style="display: none;">Fleet Owner (up to 1000 tons)</option>
                        </select>
                        <i class="fas fa-chevron-down input-icon"></i>
                    </div>
                </div>

                <div class="shipper-subtype" id="shipperSubtype" style="display: none;">
                    <div class="form-group">
                        <label for="shipperType" data-lang="ar">نوع المرسل</label>
                        <label for="shipperType" data-lang="en" style="display: none;">Shipper Type</label>
                        <select id="shipperType" name="shipperType">
                            <option value="" data-lang="ar">اختر نوع المرسل</option>
                            <option value="" data-lang="en" style="display: none;">Select Shipper Type</option>
                            <option value="individual" data-lang="ar">فرد (1-2 شحنة في اليوم)</option>
                            <option value="individual" data-lang="en" style="display: none;">Individual (1-2 shipments daily)</option>
                            <option value="small_business" data-lang="ar">متجر صغير (5-10 شحنات في اليوم)</option>
                            <option value="small_business" data-lang="en" style="display: none;">Small Business (5-10 shipments daily)</option>
                            <option value="large_business" data-lang="ar">شركة كبيرة (10-500 شحنة في اليوم)</option>
                            <option value="large_business" data-lang="en" style="display: none;">Large Business (10-500 shipments daily)</option>
                        </select>
                        <i class="fas fa-chevron-down input-icon"></i>
                    </div>
                </div>

                <div class="form-options">
                    <label class="checkbox-container">
                        <input type="checkbox" id="agreeTerms" required>
                        <span class="checkmark"></span>
                        <span data-lang="ar">أوافق على <a href="../general/terms.html">الشروط والأحكام</a> و <a href="../general/privacy.html">سياسة الخصوصية</a></span>
                        <span data-lang="en" style="display: none;">I agree to the <a href="../general/terms.html">Terms & Conditions</a> and <a href="../general/privacy.html">Privacy Policy</a></span>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary btn-auth">
                    <span data-lang="ar">إنشاء حساب</span>
                    <span data-lang="en" style="display: none;">Create Account</span>
                </button>
            </form>

            <div class="auth-footer">
                <p data-lang="ar">لديك حساب بالفعل؟ <a href="login.html">تسجيل الدخول</a></p>
                <p data-lang="en" style="display: none;">Already have an account? <a href="login.html">Sign In</a></p>
            </div>
        </div>

        <div class="auth-background">
            <div class="background-content">
                <h2 data-lang="ar">انضم إلى مجتمعنا المتنامي</h2>
                <h2 data-lang="en" style="display: none;">Join our growing community</h2>
                <p data-lang="ar">أكثر من 5,000 موصل و 10,000 صاحب شحنة يثقون بنا</p>
                <p data-lang="en" style="display: none;">Over 5,000 carriers and 10,000 shippers trust us</p>

                <div class="stats-grid">
                    <div class="stat">
                        <h3>10,000+</h3>
                        <p data-lang="ar">شحنة تم توصيلها</p>
                        <p data-lang="en" style="display: none;">Shipments Delivered</p>
                    </div>
                    <div class="stat">
                        <h3>120+</h3>
                        <p data-lang="ar">دولة</p>
                        <p data-lang="en" style="display: none;">Countries</p>
                    </div>
                    <div class="stat">
                        <h3>98%</h3>
                        <p data-lang="ar">رضا العملاء</p>
                        <p data-lang="en" style="display: none;">Satisfaction Rate</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../../config/supabase-config.js"></script>
    <script src="../../config/app-config.js"></script>
    <script src="../../assets/js/language-switcher.js"></script>
    <script src="../../assets/js/auth.js"></script>
    
    <!-- التحكم في التحقق من الحقول -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const registerForm = document.getElementById('registerForm');
        const carrierType = document.getElementById('carrierType');
        const shipperType = document.getElementById('shipperType');
        const carrierSubtype = document.getElementById('carrierSubtype');
        const shipperSubtype = document.getElementById('shipperSubtype');
        
        // التحكم في عرض الحقول حسب نوع المستخدم
        document.querySelectorAll('.type-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.type-option').forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                
                const userType = this.dataset.type;
                if (userType === 'carrier') {
                    carrierSubtype.style.display = 'block';
                    shipperSubtype.style.display = 'none';
                } else {
                    carrierSubtype.style.display = 'none';
                    shipperSubtype.style.display = 'block';
                }
            });
        });
        
        // التحقق من صحة النموذج قبل الإرسال
        registerForm.addEventListener('submit', function(e) {
            const activeType = document.querySelector('.type-option.active').dataset.type;
            const fullName = document.getElementById('fullName').value.trim();
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const password = document.getElementById('password').value.trim();
            const confirmPassword = document.getElementById('confirmPassword').value.trim();
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            // التحقق من الحقول الأساسية
            if (!fullName || !email || !phone || !password || !confirmPassword || !agreeTerms) {
                e.preventDefault();
                alert('يجب تعبئة جميع الحقول المطلوبة');
                return false;
            }
            
            // التحقق من تطابق كلمات المرور
            if (password !== confirmPassword) {
                e.preventDefault();
                alert('كلمات المرور غير متطابقة');
                return false;
            }
            
            // التحقق من نوع المستخدم
            if (activeType === 'carrier') {
                if (!carrierType.value) {
                    e.preventDefault();
                    alert('يرجى اختيار نوع الموصل');
                    carrierType.focus();
                    return false;
                }
            } else if (activeType === 'shipper') {
                if (!shipperType.value) {
                    e.preventDefault();
                    alert('يرجى اختيار نوع المرسل');
                    shipperType.focus();
                    return false;
                }
            }
        });
    });
    </script>
</body>
</html>
