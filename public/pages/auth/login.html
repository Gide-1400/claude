<!DOCTYPE html><!DOCTYPE html>

<html lang="ar" dir="rtl"><html lang="ar" dir="rtl">

<head><head>

    <meta charset="UTF-8">    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>تسجيل الدخول - FastShip</title>    <title data-lang="ar">تسجيل الدخول - الشحنة السريعة</title>

        <title data-lang="en" style="display: none;">Login - Fast Shipment</title>

    <!-- Tailwind CSS -->    <link rel="stylesheet" href="../../assets/css/style.css">

    <script src="https://cdn.tailwindcss.com"></script>    <link rel="stylesheet" href="../../assets/css/auth.css">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Font Awesome --></head>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><body class="auth-page">

        <div class="auth-container">

    <!-- Google Fonts -->        <div class="auth-card">

    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">            <div class="auth-header">

                    <a href="../../index.html" class="logo">

    <style>                    <i class="fas fa-shipping-fast"></i>

        body {                    <span data-lang="ar">الشحنة السريعة</span>

            font-family: 'Tajawal', sans-serif;                    <span data-lang="en" style="display: none;">Fast Shipment</span>

            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);                </a>

            min-height: 100vh;                <h1 data-lang="ar">تسجيل الدخول</h1>

        }                <h1 data-lang="en" style="display: none;">Login</h1>

    </style>                <p data-lang="ar">مرحباً بعودتك! سجل الدخول إلى حسابك</p>

</head>                <p data-lang="en" style="display: none;">Welcome back! Sign in to your account</p>

<body class="flex items-center justify-center p-4">            </div>

    

    <div class="w-full max-w-md">            <form class="auth-form" id="loginForm">

        <!-- Logo and Back -->                <div class="form-group">

        <div class="text-center mb-6">                    <label for="email" data-lang="ar">البريد الإلكتروني</label>

            <a href="../../index.html" class="inline-flex items-center text-white hover:text-gray-200 transition-colors mb-4">                    <label for="email" data-lang="en" style="display: none;">Email Address</label>

                <i class="fas fa-arrow-right ml-2"></i>                    <input type="email" id="email" name="email" autocomplete="email" required>

                العودة للصفحة الرئيسية                    <i class="fas fa-envelope input-icon"></i>

            </a>                </div>

            <h1 class="text-4xl font-bold text-white mb-2">⚡ FastShip</h1>

            <p class="text-white text-opacity-90">مرحباً بعودتك!</p>                <div class="form-group">

        </div>                    <label for="password" data-lang="ar">كلمة المرور</label>

                            <label for="password" data-lang="en" style="display: none;">Password</label>

        <!-- Login Card -->                    <input type="password" id="password" name="password" autocomplete="current-password" required>

        <div class="bg-white rounded-2xl shadow-2xl p-8">                    <i class="fas fa-lock input-icon"></i>

            <h2 class="text-2xl font-bold text-gray-800 mb-2 text-center">تسجيل الدخول</h2>                    <button type="button" class="toggle-password" id="togglePassword" 

            <p class="text-gray-600 text-center mb-8">ادخل بياناتك للوصول إلى حسابك</p>                            title="إظهار/إخفاء كلمة المرور" 

                                        aria-label="إظهار أو إخفاء كلمة المرور"

            <!-- Login Form -->                            data-title-ar="إظهار/إخفاء كلمة المرور"

            <form id="loginForm" onsubmit="handleLogin(event)">                            data-title-en="Show/Hide Password"

                <!-- Email -->                            data-label-ar="إظهار أو إخفاء كلمة المرور"

                <div class="mb-4">                            data-label-en="Show or hide password">

                    <label class="block text-gray-700 font-semibold mb-2">                        <i class="fas fa-eye"></i>

                        <i class="fas fa-envelope ml-2 text-gray-500"></i>                    </button>

                        البريد الإلكتروني                </div>

                    </label>

                    <input type="email" id="email" required                <!-- Demo Accounts Info -->

                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"                <div class="demo-accounts" style="background: #e8f4f8; border: 1px solid #b8e0d2; border-radius: 8px; padding: 15px; margin-bottom: 20px;">

                           placeholder="example@email.com">                    <h4 style="color: #2c5f2d; margin: 0 0 10px 0; font-size: 14px;">

                </div>                        <i class="fas fa-info-circle"></i>

                                        <span data-lang="ar">حسابات تجريبية للاختبار:</span>

                <!-- Password -->                        <span data-lang="en" style="display: none;">Demo Accounts for Testing:</span>

                <div class="mb-4">                    </h4>

                    <label class="block text-gray-700 font-semibold mb-2">                    <div style="font-size: 13px; color: #2d5a2d;">

                        <i class="fas fa-lock ml-2 text-gray-500"></i>                        <div><strong>الناقل:</strong> carrier@test.com</div>

                        كلمة المرور                        <div><strong>الشاحن:</strong> shipper@test.com</div>

                    </label>                        <div><strong>كلمة المرور:</strong> 123456</div>

                    <div class="relative">                    </div>

                        <input type="password" id="password" required                </div>

                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"

                               placeholder="أدخل كلمة المرور">                <div class="form-options">

                        <button type="button" onclick="togglePassword()" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700">                    <label class="checkbox-container">

                            <i class="fas fa-eye" id="password-icon"></i>                        <input type="checkbox" id="rememberMe">

                        </button>                        <span class="checkmark"></span>

                    </div>                        <span data-lang="ar">تذكرني</span>

                </div>                        <span data-lang="en" style="display: none;">Remember me</span>

                                    </label>

                <!-- Remember Me & Forgot Password -->                    <a href="#" onclick="alert('يرجى التواصل مع الدعم الفني: gide1979@gmail.com'); return false;" class="forgot-password" data-lang="ar">نسيت كلمة المرور؟</a>

                <div class="flex items-center justify-between mb-6">                    <a href="#" onclick="alert('Please contact support: gide1979@gmail.com'); return false;" class="forgot-password" data-lang="en" style="display: none;">Forgot password?</a>

                    <label class="flex items-center cursor-pointer">                </div>

                        <input type="checkbox" id="rememberMe" class="ml-2">

                        <span class="text-sm text-gray-600">تذكرني</span>                <button type="submit" class="btn btn-primary btn-auth">

                    </label>                    <span data-lang="ar">تسجيل الدخول</span>

                    <a href="#" class="text-sm text-blue-600 hover:underline">نسيت كلمة المرور؟</a>                    <span data-lang="en" style="display: none;">Sign In</span>

                </div>                </button>

                

                <!-- Submit Button -->                <div class="auth-divider">

                <button type="submit" id="submitBtn"                    <span data-lang="ar">أو</span>

                        class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105 shadow-lg">                    <span data-lang="en" style="display: none;">Or</span>

                    <i class="fas fa-sign-in-alt ml-2"></i>                </div>

                    تسجيل الدخول

                </button>                <div class="social-auth">

            </form>                    <button type="button" class="btn btn-social btn-google" 

                                        title="المتابعة مع جوجل" 

            <!-- Divider -->                            aria-label="تسجيل الدخول باستخدام حساب جوجل"

            <div class="flex items-center my-6">                            data-title-ar="المتابعة مع جوجل"

                <div class="flex-1 border-t border-gray-300"></div>                            data-title-en="Continue with Google"

                <span class="px-4 text-gray-500 text-sm">أو</span>                            data-label-ar="تسجيل الدخول باستخدام حساب جوجل"

                <div class="flex-1 border-t border-gray-300"></div>                            data-label-en="Sign in with Google account">

            </div>                        <i class="fab fa-google"></i>

                                    <span data-lang="ar">المتابعة مع جوجل</span>

            <!-- Social Login (Optional) -->                        <span data-lang="en" style="display: none;">Continue with Google</span>

            <div class="grid grid-cols-2 gap-3 mb-6">                    </button>

                <button class="flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all">                </div>

                    <i class="fab fa-google text-red-500 ml-2"></i>            </form>

                    Google

                </button>            <div class="auth-footer">

                <button class="flex items-center justify-center px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all">                <p data-lang="ar">ليس لديك حساب؟ <a href="register.html">إنشاء حساب</a></p>

                    <i class="fab fa-apple text-gray-800 ml-2"></i>                <p data-lang="en" style="display: none;">Don't have an account? <a href="register.html">Create account</a></p>

                    Apple            </div>

                </button>        </div>

            </div>

                    <div class="auth-background">

            <!-- Don't have account -->            <div class="background-content">

            <div class="text-center">                <h2 data-lang="ar">انضم إلى آلاف المستخدمين الراضين</h2>

                <p class="text-gray-600">                <h2 data-lang="en" style="display: none;">Join thousands of satisfied users</h2>

                    ليس لديك حساب؟                 <p data-lang="ar">المنصة الرائدة لربط الشاحنين بأصحاب الشحنات حول العالم</p>

                    <a href="register.html" class="text-blue-600 font-semibold hover:underline">إنشاء حساب جديد</a>                <p data-lang="en" style="display: none;">The leading platform connecting carriers with shippers worldwide</p>

                </p>                

            </div>                <div class="features-list">

        </div>                    <div class="feature">

                                <i class="fas fa-shield-alt"></i>

        <!-- Error/Success Messages -->                        <span data-lang="ar">بيئة آمنة وموثوقة</span>

        <div id="messageBox" class="hidden mt-4 p-4 rounded-lg"></div>                        <span data-lang="en" style="display: none;">Safe & reliable environment</span>

    </div>                    </div>

                    <div class="feature">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>                        <i class="fas fa-bolt"></i>

    <script src="../../config/supabase-config.js"></script>                        <span data-lang="ar">مطابقة ذكية وسريعة</span>

    <script>                        <span data-lang="en" style="display: none;">Smart & fast matching</span>

        // Toggle Password Visibility                    </div>

        function togglePassword() {                    <div class="feature">

            const field = document.getElementById('password');                        <i class="fas fa-globe"></i>

            const icon = document.getElementById('password-icon');                        <span data-lang="ar">تغطية حول العالم</span>

            if (field.type === 'password') {                        <span data-lang="en" style="display: none;">Worldwide coverage</span>

                field.type = 'text';                    </div>

                icon.classList.remove('fa-eye');                </div>

                icon.classList.add('fa-eye-slash');            </div>

            } else {        </div>

                field.type = 'password';    </div>

                icon.classList.remove('fa-eye-slash');

                icon.classList.add('fa-eye');    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

            }    <script src="../../config/supabase-config.js"></script>

        }    <script src="../../assets/js/accessibility.js"></script>

            <script src="../../assets/js/language-switcher.js"></script>

        // Show Message    <script src="../../assets/js/auth-manager.js"></script>

        function showMessage(message, type) {    <script src="../../assets/js/auth.js"></script>

            const box = document.getElementById('messageBox');    

            box.className = `mt-4 p-4 rounded-lg ${type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`;    <!-- Inline accessibility fix for immediate deployment -->

            box.textContent = message;    <script>

            box.classList.remove('hidden');        console.log('Login page loaded with accessibility - ' + new Date());

            setTimeout(() => box.classList.add('hidden'), 5000);        

        }        // Immediate accessibility fix for toggle password button

                document.addEventListener('DOMContentLoaded', function() {

        // Handle Login            const toggleBtn = document.getElementById('togglePassword');

        async function handleLogin(event) {            if (toggleBtn && !toggleBtn.hasAttribute('aria-label')) {

            event.preventDefault();                // Fallback if main accessibility script doesn't work

                            toggleBtn.setAttribute('title', 'إظهار/إخفاء كلمة المرور');

            const email = document.getElementById('email').value;                toggleBtn.setAttribute('aria-label', 'إظهار أو إخفاء كلمة المرور');

            const password = document.getElementById('password').value;                console.log('Manual accessibility fix applied to toggle button');

                        }

            const submitBtn = document.getElementById('submitBtn');            

            submitBtn.disabled = true;            // Fix all buttons without proper labels

            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin ml-2"></i> جاري تسجيل الدخول...';            const buttonsWithoutLabels = document.querySelectorAll('button:not([aria-label]):not([title])');

                        buttonsWithoutLabels.forEach(btn => {

            try {                if (btn.querySelector('.fa-eye, .fa-eye-slash')) {

                // Sign in with Supabase                    btn.setAttribute('title', 'إظهار/إخفاء كلمة المرور');

                const { data, error } = await supabase.auth.signInWithPassword({                    btn.setAttribute('aria-label', 'إظهار أو إخفاء كلمة المرور');

                    email: email,                } else if (btn.querySelector('.fa-google')) {

                    password: password                    btn.setAttribute('title', 'تسجيل الدخول بواسطة Google');

                });                    btn.setAttribute('aria-label', 'تسجيل الدخول بواسطة Google');

                                }

                if (error) throw error;            });

                            

                showMessage('تم تسجيل الدخول بنجاح! جاري تحويلك...', 'success');            console.log('All accessibility fixes applied successfully');

                        });

                // Get user metadata to determine account type    </script>

                const accountType = data.user.user_metadata.account_type;</body>

                </html>

                // Redirect based on account type
                setTimeout(() => {
                    if (accountType === 'carrier') {
                        window.location.href = '../carrier/index.html';
                    } else {
                        window.location.href = '../shipper/index.html';
                    }
                }, 1500);
                
            } catch (error) {
                showMessage(error.message || 'البريد الإلكتروني أو كلمة المرور غير صحيحة', 'error');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-sign-in-alt ml-2"></i> تسجيل الدخول';
            }
        }
        
        // Check if already logged in
        supabase.auth.getSession().then(({ data: { session } }) => {
            if (session) {
                const accountType = session.user.user_metadata.account_type;
                if (accountType === 'carrier') {
                    window.location.href = '../carrier/index.html';
                } else {
                    window.location.href = '../shipper/index.html';
                }
            }
        });
    </script>
</body>
</html>
