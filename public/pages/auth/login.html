<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang="ar">تسجيل الدخول - الشحنة السريعة</title>
    <title data-lang="en" style="display: none;">Login - Fast Shipment</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/auth.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="auth-page">
    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <a href="../../index.html" class="logo">
                    <i class="fas fa-shipping-fast"></i>
                    <span data-lang="ar">الشحنة السريعة</span>
                    <span data-lang="en" style="display: none;">Fast Shipment</span>
                </a>
                <h1 data-lang="ar">تسجيل الدخول</h1>
                <h1 data-lang="en" style="display: none;">Login</h1>
                <p data-lang="ar">مرحباً بعودتك! سجل الدخول إلى حسابك</p>
                <p data-lang="en" style="display: none;">Welcome back! Sign in to your account</p>
            </div>

            <form class="auth-form" id="loginForm">
                <div class="form-group">
                    <label for="email" data-lang="ar">البريد الإلكتروني</label>
                    <label for="email" data-lang="en" style="display: none;">Email Address</label>
                    <input type="email" id="email" name="email" autocomplete="email" required>
                    <i class="fas fa-envelope input-icon"></i>
                </div>

                <div class="form-group">
                    <label for="password" data-lang="ar">كلمة المرور</label>
                    <label for="password" data-lang="en" style="display: none;">Password</label>
                    <input type="password" id="password" name="password" autocomplete="current-password" required>
                    <i class="fas fa-lock input-icon"></i>
                    <button type="button" class="toggle-password" id="togglePassword" 
                            title="إظهار/إخفاء كلمة المرور" 
                            aria-label="إظهار أو إخفاء كلمة المرور"
                            data-title-ar="إظهار/إخفاء كلمة المرور"
                            data-title-en="Show/Hide Password"
                            data-label-ar="إظهار أو إخفاء كلمة المرور"
                            data-label-en="Show or hide password">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>

                <!-- Demo Accounts Info -->
                <div class="demo-accounts" style="background: #e8f4f8; border: 1px solid #b8e0d2; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                    <h4 style="color: #2c5f2d; margin: 0 0 10px 0; font-size: 14px;">
                        <i class="fas fa-info-circle"></i>
                        <span data-lang="ar">حسابات تجريبية للاختبار:</span>
                        <span data-lang="en" style="display: none;">Demo Accounts for Testing:</span>
                    </h4>
                    <div style="font-size: 13px; color: #2d5a2d;">
                        <div><strong>الناقل:</strong> carrier@test.com</div>
                        <div><strong>الشاحن:</strong> shipper@test.com</div>
                        <div><strong>كلمة المرور:</strong> 123456</div>
                    </div>
                </div>

                <div class="form-options">
                    <label class="checkbox-container">
                        <input type="checkbox" id="rememberMe">
                        <span class="checkmark"></span>
                        <span data-lang="ar">تذكرني</span>
                        <span data-lang="en" style="display: none;">Remember me</span>
                    </label>
                    <a href="forgot-password.html" class="forgot-password" data-lang="ar">نسيت كلمة المرور؟</a>
                    <a href="forgot-password.html" class="forgot-password" data-lang="en" style="display: none;">Forgot password?</a>
                </div>

                <button type="submit" class="btn btn-primary btn-auth">
                    <span data-lang="ar">تسجيل الدخول</span>
                    <span data-lang="en" style="display: none;">Sign In</span>
                </button>

                <div class="auth-divider">
                    <span data-lang="ar">أو</span>
                    <span data-lang="en" style="display: none;">Or</span>
                </div>

                <div class="social-auth">
                    <button type="button" class="btn btn-social btn-google" 
                            title="المتابعة مع جوجل" 
                            aria-label="تسجيل الدخول باستخدام حساب جوجل"
                            data-title-ar="المتابعة مع جوجل"
                            data-title-en="Continue with Google"
                            data-label-ar="تسجيل الدخول باستخدام حساب جوجل"
                            data-label-en="Sign in with Google account">
                        <i class="fab fa-google"></i>
                        <span data-lang="ar">المتابعة مع جوجل</span>
                        <span data-lang="en" style="display: none;">Continue with Google</span>
                    </button>
                </div>
            </form>

            <div class="auth-footer">
                <p data-lang="ar">ليس لديك حساب؟ <a href="register.html">إنشاء حساب</a></p>
                <p data-lang="en" style="display: none;">Don't have an account? <a href="register.html">Create account</a></p>
            </div>
        </div>

        <div class="auth-background">
            <div class="background-content">
                <h2 data-lang="ar">انضم إلى آلاف المستخدمين الراضين</h2>
                <h2 data-lang="en" style="display: none;">Join thousands of satisfied users</h2>
                <p data-lang="ar">المنصة الرائدة لربط الشاحنين بأصحاب الشحنات حول العالم</p>
                <p data-lang="en" style="display: none;">The leading platform connecting carriers with shippers worldwide</p>
                
                <div class="features-list">
                    <div class="feature">
                        <i class="fas fa-shield-alt"></i>
                        <span data-lang="ar">بيئة آمنة وموثوقة</span>
                        <span data-lang="en" style="display: none;">Safe & reliable environment</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-bolt"></i>
                        <span data-lang="ar">مطابقة ذكية وسريعة</span>
                        <span data-lang="en" style="display: none;">Smart & fast matching</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-globe"></i>
                        <span data-lang="ar">تغطية حول العالم</span>
                        <span data-lang="en" style="display: none;">Worldwide coverage</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Initialize Supabase directly here
        const SUPABASE_URL = 'https://chmistqmcmmmjqeanudu.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNobWlzdHFtY21tbWpxZWFudWR1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2NDg1MTEsImV4cCI6MjA3NjIyNDUxMX0.Ho-3nEs3_w5Xmna2z0HQF6dDjh8MkiBzD10N_6vuEKs';
        window.supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    </script>
    <script src="../../assets/js/accessibility.js"></script>
    <script src="../../assets/js/backup-auth.js"></script>
    <script src="../../assets/js/auth-simple.js"></script>
    
    <!-- Inline accessibility fix for immediate deployment -->
    <script>
        console.log('Login page loaded with accessibility - ' + new Date());
        
        // Immediate accessibility fix for toggle password button
        document.addEventListener('DOMContentLoaded', function() {
            const toggleBtn = document.getElementById('togglePassword');
            if (toggleBtn && !toggleBtn.hasAttribute('aria-label')) {
                // Fallback if main accessibility script doesn't work
                toggleBtn.setAttribute('title', 'إظهار/إخفاء كلمة المرور');
                toggleBtn.setAttribute('aria-label', 'إظهار أو إخفاء كلمة المرور');
                console.log('Manual accessibility fix applied to toggle button');
            }
            
            // Fix all buttons without proper labels
            const buttonsWithoutLabels = document.querySelectorAll('button:not([aria-label]):not([title])');
            buttonsWithoutLabels.forEach(btn => {
                if (btn.querySelector('.fa-eye, .fa-eye-slash')) {
                    btn.setAttribute('title', 'إظهار/إخفاء كلمة المرور');
                    btn.setAttribute('aria-label', 'إظهار أو إخفاء كلمة المرور');
                } else if (btn.querySelector('.fa-google')) {
                    btn.setAttribute('title', 'تسجيل الدخول بواسطة Google');
                    btn.setAttribute('aria-label', 'تسجيل الدخول بواسطة Google');
                }
            });
            
            console.log('All accessibility fixes applied successfully');
        });
    </script>
</body>
</html>
