# ุฅุถุงูุฉ ูุงุนุฏุฉ ุจูุงูุงุช ุงููุฏู ุงูุนุงูููุฉ - Global Cities Database

## ูุธุฑุฉ ุนุงูุฉ
ูุฐุง ุงูููู ูุญุชูู ุนูู ุฃูุซุฑ ูู 80 ูุฏููุฉ ุนุงูููุฉ ุฑุฆูุณูุฉ ูู ุฌููุน ุฃูุญุงุก ุงูุนุงูู ูุน ุฃุณูุงุฆูุง ุจุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ.

## ููููุฉ ุงูุชุซุจูุช

### ุงูุทุฑููุฉ 1: ุนุจุฑ Supabase Dashboard
1. ุงูุชุญ ูุดุฑูุนู ูู Supabase Dashboard
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ุงูุณุฎ ูุญุชูู ููู `global-cities.sql`
4. ุงูุตู ุงููุญุชูู ูู SQL Editor
5. ุงุถุบุท ุนูู **Run** ูุชูููุฐ ุงูุฃูุฑ

### ุงูุทุฑููุฉ 2: ุนุจุฑ Supabase CLI
```bash
supabase db push utils/global-cities.sql
```

## ุงูุฌุฏูู ุงููููุดุฃ

### ุฌุฏูู `cities`
ูุญุชูู ุนูู ุงูุญููู ุงูุชุงููุฉ:
- `id` (UUID) - ุงููุนุฑู ุงููุฑูุฏ
- `name_ar` (TEXT) - ุงุณู ุงููุฏููุฉ ุจุงูุนุฑุจูุฉ
- `name_en` (TEXT) - ุงุณู ุงููุฏููุฉ ุจุงูุฅูุฌููุฒูุฉ
- `country_code` (TEXT) - ุฑูุฒ ุงูุฏููุฉ (ISO)
- `country_ar` (TEXT) - ุงุณู ุงูุฏููุฉ ุจุงูุนุฑุจูุฉ
- `country_en` (TEXT) - ุงุณู ุงูุฏููุฉ ุจุงูุฅูุฌููุฒูุฉ
- `region` (TEXT) - ุงูููุทูุฉ (ุงุฎุชูุงุฑู)
- `latitude` (DECIMAL) - ุฎุท ุงูุนุฑุถ
- `longitude` (DECIMAL) - ุฎุท ุงูุทูู
- `population` (INTEGER) - ุนุฏุฏ ุงูุณูุงู
- `is_capital` (BOOLEAN) - ูู ูู ุนุงุตูุฉุ
- `is_major_city` (BOOLEAN) - ูู ูู ูุฏููุฉ ุฑุฆูุณูุฉุ
- `created_at` - ุชุงุฑูุฎ ุงูุฅูุดุงุก
- `updated_at` - ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ

## ุงูุฏูู ุงููุดูููุฉ

### ุฏูู ุงูุฎููุฌ ุงูุนุฑุจู
- ๐ธ๐ฆ ุงูุณุนูุฏูุฉ (10 ูุฏู)
- ๐ฆ๐ช ุงูุฅูุงุฑุงุช (6 ูุฏู)
- ๐ฐ๐ผ ุงููููุช (3 ูุฏู)
- ๐ถ๐ฆ ูุทุฑ (3 ูุฏู)
- ๐ง๐ญ ุงูุจุญุฑูู (2 ูุฏููุฉ)
- ๐ด๐ฒ ุนูุงู (3 ูุฏู)

### ุฏูู ุนุฑุจูุฉ ุฃุฎุฑู
- ๐ช๐ฌ ูุตุฑ (4 ูุฏู)
- ๐ฏ๐ด ุงูุฃุฑุฏู (3 ูุฏู)
- ๐ฑ๐ง ูุจูุงู (2 ูุฏููุฉ)
- ๐ฎ๐ถ ุงูุนุฑุงู (3 ูุฏู)

### ุฃูุฑูุจุง
- ๐ฌ๐ง ุงูููููุฉ ุงููุชุญุฏุฉ
- ๐ซ๐ท ูุฑูุณุง
- ๐ฉ๐ช ุฃููุงููุง
- ๐ฎ๐น ุฅูุทุงููุง
- ๐ช๐ธ ุฅุณุจุงููุง
- ๐ณ๐ฑ ููููุฏุง

### ุขุณูุง
- ๐ฏ๐ต ุงููุงุจุงู
- ๐จ๐ณ ุงูุตูู
- ๐ฐ๐ท ููุฑูุง ุงูุฌููุจูุฉ
- ๐น๐ญ ุชุงููุงูุฏ
- ๐ธ๐ฌ ุณูุบุงููุฑุฉ
- ๐ฒ๐พ ูุงููุฒูุง
- ๐ฎ๐ณ ุงูููุฏ

### ุฃูุฑููุง
- ๐บ๐ธ ุงูููุงูุงุช ุงููุชุญุฏุฉ (5 ูุฏู)
- ๐จ๐ฆ ููุฏุง (2 ูุฏููุฉ)

### ุฃูุฑูููุง
- ๐ฟ๐ฆ ุฌููุจ ุฃูุฑูููุง
- ๐ณ๐ฌ ููุฌูุฑูุง
- ๐ฐ๐ช ููููุง

### ุฃูููุงููุณูุง
- ๐ฆ๐บ ุฃุณุชุฑุงููุง (3 ูุฏู)

## ุงููุธุงุฆู ุงููุชุงุญุฉ

### ุฏุงูุฉ `search_cities(search_term TEXT)`
ุชุจุญุซ ุนู ุงููุฏู ุจุงููุบุฉ ุงูุนุฑุจูุฉ ุฃู ุงูุฅูุฌููุฒูุฉ.

**ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู:**
```sql
SELECT * FROM search_cities('ุงูุฑูุงุถ');
SELECT * FROM search_cities('Dubai');
SELECT * FROM search_cities('ููุฏู');
```

**ุงูุงุณุชุฎุฏุงู ูู JavaScript:**
```javascript
const { data, error } = await supabaseClient
    .rpc('search_cities', { search_term: 'ุงูุฑูุงุถ' });
```

## ุงุณุชุฎุฏุงู ุงูุฌุฏูู ูู ุงูุชุทุจูู

### 1. ุงูุจุญุซ ุนู ูุฏููุฉ
```javascript
const { data: cities, error } = await supabaseClient
    .from('cities')
    .select('*')
    .ilike('name_ar', '%ุงูุฑูุงุถ%')
    .limit(10);
```

### 2. ุงูุญุตูู ุนูู ุฌููุน ูุฏู ุฏููุฉ
```javascript
const { data: cities, error } = await supabaseClient
    .from('cities')
    .select('*')
    .eq('country_code', 'SA')
    .order('population', { ascending: false });
```

### 3. ุงูุญุตูู ุนูู ุงูุนูุงุตู ููุท
```javascript
const { data: capitals, error } = await supabaseClient
    .from('cities')
    .select('*')
    .eq('is_capital', true)
    .order('name_ar');
```

### 4. ุงูุจุญุซ ุงูุฐูู (ุจุงุณุชุฎุฏุงู ุงูุฏุงูุฉ)
```javascript
const { data: results, error } = await supabaseClient
    .rpc('search_cities', { 
        search_term: searchInput.value 
    });
```

## ุฅุถุงูุฉ ูุฏู ุฌุฏูุฏุฉ

ูุฅุถุงูุฉ ูุฏู ุฌุฏูุฏุฉุ ุงุณุชุฎุฏู:

```sql
INSERT INTO cities (name_ar, name_en, country_code, country_ar, country_en, is_capital, population)
VALUES ('ุงููุฏููุฉ', 'City Name', 'CODE', 'ุงูุฏููุฉ', 'Country', false, 1000000);
```

## ุงูุชุญุฏูุซ ูุงูุตูุงูุฉ

### ุชุญุฏูุซ ูุนูููุงุช ูุฏููุฉ
```sql
UPDATE cities 
SET population = 5000000, updated_at = CURRENT_TIMESTAMP
WHERE name_en = 'Dubai';
```

### ุญุฐู ูุฏููุฉ
```sql
DELETE FROM cities WHERE name_en = 'City Name';
```

## ุงูููุงุฑุณ (Indexes)

ุชู ุฅูุดุงุก ููุงุฑุณ ูุชุญุณูู ุฃุฏุงุก ุงูุจุญุซ:
- `idx_cities_name_ar` - ุงูุจุญุซ ุจุงูุงุณู ุงูุนุฑุจู
- `idx_cities_name_en` - ุงูุจุญุซ ุจุงูุงุณู ุงูุฅูุฌููุฒู
- `idx_cities_country` - ุงูุจุญุซ ุญุณุจ ุงูุฏููุฉ
- `idx_cities_search` - ุจุญุซ ูุตู ูุงูู ุจุงูุนุฑุจูุฉ

## ุงูุฃูุงู (Security)

ุชุฐูุฑ ุฅุถุงูุฉ Row Level Security (RLS) policies ุฅุฐุง ูุฒู ุงูุฃูุฑ:

```sql
-- ุงูุณูุงุญ ุจุงููุฑุงุกุฉ ููุฌููุน
ALTER TABLE cities ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Allow public read access"
ON cities FOR SELECT
TO public
USING (true);

-- ุงูุณูุงุญ ุจุงูุฅุถุงูุฉ/ุงูุชุนุฏูู ูููุตุงุฏููู ููุท
CREATE POLICY "Allow authenticated insert"
ON cities FOR INSERT
TO authenticated
WITH CHECK (true);
```

## ููุงุญุธุงุช ูููุฉ

1. **ุชุญุฏูุซ ููุชุธู**: ูููุตุญ ุจุชุญุฏูุซ ุจูุงูุงุช ุงููุฏู ุฏูุฑูุงู
2. **ุงูุชูุณุน**: ูููู ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงููุฏู ุญุณุจ ุงูุญุงุฌุฉ
3. **ุงูุฏูุฉ**: ุชุฃูุฏ ูู ุฏูุฉ ุงูุฅุญุฏุงุซูุงุช ุฅุฐุง ููุช ุชุณุชุฎุฏููุง
4. **ุงูุฃุฏุงุก**: ุงูุฌุฏูู ูุญุณูู ููุจุญุซ ุงูุณุฑูุน ุญุชู ูุน ุขูุงู ุงููุฏู

## ุงูุฏุนู

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงููุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.

---

**ุขุฎุฑ ุชุญุฏูุซ:** 29 ุฃูุชูุจุฑ 2025
**ุงูุฅุตุฏุงุฑ:** 1.0.0
